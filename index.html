<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAU Journal Finder</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HDD4JMS2G3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-HDD4JMS2G3');
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Library to read XLSX files -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <!-- Fuse.js for fuzzy searching -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
    <!-- Tom-Select for multi-select dropdowns -->
    <link href="https://cdn.jsdelivr.net/npm/tom-select@2.2.2/dist/css/tom-select.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/tom-select@2.2.2/dist/js/tom-select.complete.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;500;600;700&family=PT+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* LAU Style Guide Inspired Customizations */
        body {
            font-family: 'PT Sans', sans-serif;
            background-color: #f4f4f5; /* A light gray background */
        }
        .lau-green {
            color: #006751;
        }
        .bg-lau-green {
            background-color: #006751;
        }
        .border-lau-green {
            border-color: #006751;
        }
        h1, h2, h3, h4 {
            font-family: 'Raleway', sans-serif;
        }
        .tab-button {
            transition: all 0.3s ease;
            border-bottom-width: 4px; /* Set a consistent border width */
        }
        .tab-button.active {
            border-color: #006751;
            background-color: #006751;
            color: white;
        }
        /* Keep active tab text white on hover */
        .tab-button.active:hover {
            color: white;
        }
        /* Style for inactive tabs on hover */
        .tab-button:not(.active):hover {
            color: #374151; /* Darker text */
            border-color: #006751; /* Green border */
        }
        .search-input::placeholder {
            color: #9ca3af;
            font-style: italic;
        }
        .result-card {
            border-left: 5px solid #006751;
        }
        .filter-label {
            font-weight: 500;
            color: #374151;
            font-family: 'Raleway', sans-serif;
        }
        .summary-item {
            cursor: pointer;
            transition: background-color 0.2s, border-radius 0.2s;
        }
        .summary-item:hover {
            background-color: #f9fafb;
        }
        #progress-bar {
            transition: width 0.3s ease-in-out;
        }
        /* Tom-Select Styles with SVG Arrow */
        .ts-control, .custom-select-arrow {
            border-radius: 0.375rem;
            border-color: #d1d5db;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem !important;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        .ts-wrapper.multi .ts-control {
            max-height: 5.5rem; /* Limits the height to ~2-3 rows */
            overflow-y: auto;   /* Allows scrolling for more items */
        }
        .ts-control .ts-input {
            font-family: 'PT Sans', sans-serif;
        }
        .ts-dropdown {
            font-family: 'PT Sans', sans-serif;
        }
        .info-icon, .link-icon {
            display: inline-block;
            width: 1.1rem;
            height: 1.1rem;
            margin-left: 0.35rem;
            cursor: pointer;
            vertical-align: middle;
        }
        .hyperlink {
            color: #2563eb;
        }
        .hyperlink .link-icon {
            color: #2563eb;
        }
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.5rem;
            max-width: 500px;
            width: 90%;
            position: relative;
        }
        .modal-close {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            color: #6b7280;
        }
        /* Clear button for search input */
        .clear-search {
            position: absolute;
            right: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #9ca3af;
            display: none; /* Hidden by default */
        }
        .search-input-wrapper:focus-within .clear-search,
        .search-input-wrapper .search-input:not(:placeholder-shown) + .clear-search {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="container mx-auto p-4 sm:p-6 md:p-8">
        <!-- Header -->
        <header class="text-center mb-8">
            <img src="https://100.lau.edu.lb/images/LAU_Centennial_Primary_Logo_RGB_full_colors.png" alt="LAU Logo" class="h-28 mx-auto mb-4" onerror="this.onerror=null;this.src='https://www.lau.edu.lb/2022/images/lau-logo-text-black.png';">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">ORBIT Rankings and Beyond</h1>
            <p class="text-gray-600 mt-2">Your guide to journal rankings and classifications.</p>
        </header>

        <!-- Main Content -->
        <main id="main-content" class="bg-white p-6 rounded-lg shadow-lg">
            <!-- Tab Navigation -->
            <div id="tab-container" class="mb-6 border-b border-gray-200 hidden">
                <nav class="flex flex-wrap -mb-px" aria-label="Tabs">
                    <button id="tab-journal-search" class="tab-button active text-gray-600 py-3 px-4 text-sm font-medium text-center rounded-t-lg border-transparent">
                        Search for a Journal
                    </button>
                    <button id="tab-filter-search" class="tab-button text-gray-600 py-3 px-4 text-sm font-medium text-center rounded-t-lg border-transparent">
                        Search by Field/Rank/Publisher
                    </button>
                    <button id="tab-about" class="tab-button text-gray-600 py-3 px-4 text-sm font-medium text-center rounded-t-lg border-transparent">
                        About
                    </button>
                    <button id="tab-faq" class="tab-button text-gray-600 py-3 px-4 text-sm font-medium text-center rounded-t-lg border-transparent">
                        FAQ
                    </button>
                    <button id="tab-contact" class="tab-button text-gray-600 py-3 px-4 text-sm font-medium text-center rounded-t-lg border-transparent">
                        Contact Us
                    </button>
                </nav>
            </div>

            <!-- Search by Journal Section -->
            <div id="panel-journal-search" class="hidden">
                <div class="flex flex-col sm:flex-row gap-4">
                    <div class="relative w-full search-input-wrapper">
                        <input type="text" id="journal-input" class="search-input w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-lau-green" placeholder="Enter journal name or ISSN">
                        <span id="clear-search-btn" class="clear-search">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </span>
                    </div>
                    <button id="search-btn" class="bg-lau-green text-white px-6 py-2 rounded-md hover:bg-opacity-90 transition">Search</button>
                </div>
            </div>

            <!-- Search by Field/Rank Section -->
            <div id="panel-filter-search" class="hidden">
                 <p class="text-gray-600 mb-4">Select one or more criteria to filter journals.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 items-end">
                    <div class="flex flex-col">
                        <label for="rank-select" class="filter-label mb-1">Rank(s)</label>
                        <select id="rank-select" multiple></select>
                    </div>
                    <div class="flex flex-col">
                        <label for="for-name-select" class="filter-label mb-1">FoR Name(s)</label>
                        <select id="for-name-select" multiple></select>
                    </div>
                    <div class="flex flex-col">
                        <label for="publisher-select" class="filter-label mb-1">Publisher(s)</label>
                        <select id="publisher-select" multiple></select>
                    </div>
                     <div class="flex flex-col">
                        <label for="open-access-select" class="filter-label mb-1">Open Access</label>
                        <select id="open-access-select" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-lau-green h-10 bg-white custom-select-arrow">
                            <option value="All">All</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div class="flex flex-col">
                        <label for="sort-select" class="filter-label mb-1">Sort by</label>
                        <select id="sort-select" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-lau-green h-10 bg-white custom-select-arrow">
                            <option value="name-asc">Name (A-Z)</option>
                            <option value="rank-asc">Rank (Ascending)</option>
                            <option value="rank-desc">Rank (Descending)</option>
                        </select>
                    </div>
                    <div class="flex gap-2">
                        <button id="filter-btn" class="w-full bg-lau-green text-white px-6 py-2 rounded-md hover:bg-opacity-90 transition h-10">Filter</button>
                        <button id="reset-btn" class="w-full bg-gray-200 text-gray-700 px-6 py-2 rounded-md hover:bg-gray-300 transition h-10">Reset</button>
                    </div>
                </div>
            </div>
            
            <!-- About Section -->
            <div id="panel-about" class="hidden prose max-w-none">
                <h2 class="lau-green">About the LAU ORBIT Ranking</h2>
                <p>This tool provides access to the Objective Ranking Based on Integrated Tiers (ORBIT), a comprehensive system designed to offer a stable and holistic view of academic journal quality.</p>
                <p>ORBIT synthesizes the expert opinions of six major international ranking systems to produce a single consensus grade and a "Score Uncertainty" that measures the level of agreement among the sources.</p>
                <p>To find a journal, you can search by its name, ISSN, or browse by field of research using the standardized Australian and New Zealand Standard Research Classification (ANZSRC) 2020 codes. Our goal is to provide a robust, transparent, and easy-to-use guide for scholars, researchers, and academic institutions.</p>
                
                <h3 class="lau-green">Letter Grade System</h3>
                <p>Journals are assigned a letter grade based on their calculated score, reflecting their standing within the academic community.</p>
                <ul class="list-disc pl-5">
                    <li><strong>A+:</strong> Top-tier journals, leaders in their field.</li>
                    <li><strong>A:</strong> Excellent, highly-regarded journals.</li>
                    <li><strong>B:</strong> Good, solid and reputable journals.</li>
                    <li><strong>C:</strong> Journals that meet basic academic standards.</li>
                    <li><strong>D:</strong> Non-recommended journals.</li>
                </ul>
                <h3 class="lau-green">Grade Distribution</h3>
                 <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="p-2 border">Grade</th>
                            <th class="p-2 border">Count</th>
                            <th class="p-2 border">Percentage</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td class="p-2 border">A+</td><td class="p-2 border">1098</td><td class="p-2 border">4.67%</td></tr>
                        <tr><td class="p-2 border">A</td><td class="p-2 border">2684</td><td class="p-2 border">11.43%</td></tr>
                        <tr><td class="p-2 border">B</td><td class="p-2 border">14242</td><td class="p-2 border">60.64%</td></tr>
                        <tr><td class="p-2 border">C</td><td class="p-2 border">2514</td><td class="p-2 border">10.70%</td></tr>
                        <tr><td class="p-2 border">D</td><td class="p-2 border">2950</td><td class="p-2 border">12.56%</td></tr>
                    </tbody>
                 </table>
                <h3 class="lau-green">Source Rankings</h3>
                <p>ORBIT only includes journals which are ranked by at least two of our used rankings/lists. We currently use the following expert-based rankings/lists:</p>
                <ul class="list-disc pl-5">
                    <li><a href="https://abdc.edu.au/abdc-journal-quality-list/" target="_blank" class="hyperlink">ABDC<svg class="link-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A2.25 2.25 0 0110.5 10.5v-4.5a2.25 2.25 0 012.25-2.25H15M10.5 15L15 10.5" /></svg></a></li>
                    <li><a href="https://charteredabs.org/academic-journal-guide" target="_blank" class="hyperlink">AJG<svg class="link-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A2.25 2.25 0 0110.5 10.5v-4.5a2.25 2.25 0 012.25-2.25H15M10.5 15L15 10.5" /></svg></a></li>
                    <li><a href="https://www.shanghairanking.com/activities/aes" target="_blank" class="hyperlink">ARWU<svg class="link-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A2.25 2.25 0 0110.5 10.5v-4.5a2.25 2.25 0 012.25-2.25H15M10.5 15L15 10.5" /></svg></a></li>
                    <li><a href="https://ewl.fenqubiao.com/#/en/early-warning-journal-list-2024" target="_blank" class="hyperlink">Early Warning Journal List<svg class="link-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A2.25 2.25 0 0110.5 10.5v-4.5a2.25 2.25 0 012.25-2.25H15M10.5 15L15 10.5" /></svg></a></li>
                    <li><a href="https://fnege.org/en/fnege-journal-quality-list/" target="_blank" class="hyperlink">FNEGE<svg class="link-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A2.25 2.25 0 0110.5 10.5v-4.5a2.25 2.25 0 012.25-2.25H15M10.5 15L15 10.5" /></svg></a></li>
                    <li><a href="https://jfp.csc.fi/jufoportal" target="_blank" class="hyperlink">JUFO<svg class="link-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A2.25 2.25 0 0110.5 10.5v-4.5a2.25 2.25 0 012.25-2.25H15M10.5 15L15 10.5" /></svg></a></li>
                    <li><a href="https://kanalregister.hkdir.no/en" target="_blank" class="hyperlink">Norwegian Register<svg class="link-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A2.25 2.25 0 0110.5 10.5v-4.5a2.25 2.25 0 012.25-2.25H15M10.5 15L15 10.5" /></svg></a></li>
                    <li><a href="https://jsom.utdallas.edu/the-utd-top-100-business-school-research-rankings/search#rankingsByJournal" target="_blank" class="hyperlink">UTD24<svg class="link-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A2.25 2.25 0 0110.5 10.5v-4.5a2.25 2.25 0 012.25-2.25H15M10.5 15L15 10.5" /></svg></a></li>
                    <li><a href="https://www.vhbonline.org/en/services/vhb-rating-2024" target="_blank" class="hyperlink">VHB<svg class="link-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A2.25 2.25 0 0110.5 10.5v-4.5a2.25 2.25 0 012.25-2.25H15M10.5 15L15 10.5" /></svg></a></li>
                </ul>
                <p>We also use the <a href="http://arc.gov.au/manage-your-grant/classification-codes-rfcd-seo-and-anzsic-codes" target="_blank" class="hyperlink">Australian and New Zealand Standard Research Classification (ANZSRC)<svg class="link-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A2.25 2.25 0 0110.5 10.5v-4.5a2.25 2.25 0 012.25-2.25H15M10.5 15L15 10.5" /></svg></a> to indicate the Field of Research of each journal.</p>
            </div>
            
            <!-- FAQ Section -->
            <div id="panel-faq" class="hidden prose max-w-none">
                <h2 class="lau-green">ORBIT Methodology</h2>
                <h3 class="lau-green">❓ What is the main goal of the ORBIT system?</h3>
                <p>The primary goal of ORBIT is to provide a more stable and holistic measure of a journal's standing by synthesizing the expert opinions from multiple, established international ranking systems. This approach helps to resolve disagreements between individual lists and reduces the biases inherent in any single ranking.</p>
                <h3 class="lau-green">❓ Why are citation-based metrics like JIF, SJR, or CiteScore not used?</h3>
                <p>ORBIT is intentionally designed to be an alternative to citation-based metrics. While useful, citation metrics can be heavily skewed by disciplinary citation cultures, self-citation practices, and the age of a journal. Our framework prioritizes expert-driven, tier-based evaluations which are designed to reflect perceived academic quality and reputation.</p>
                <h3 class="lau-green">❓ Why are major indexing databases like Scopus or Web of Science not included as a ranking system?</h3>
                <p>Indexing databases serve a different, albeit critical, function: they verify a journal's existence and discoverability, not its quality. Inclusion standards can vary, and presence in an index does not equate to academic reputation. ORBIT focuses on systems that actively assess and rank journals based on quality, not just on their inclusion in a database.</p>
                <h3 class="lau-green">❓ Why aren't other national ranking systems like the Danish list or HCERES (France) included?</h3>
                <p>Our methodology requires that we only include ranking systems that are actively and regularly updated, are primarily expert-driven (not purely metric-based), and are integrative in nature. Many national systems are either no longer maintained, rely heavily on citation indicators, or have a scope that is too narrow for a global consensus model. If you know of a system that fits our criteria, please let us know.</p>
                <h3 class="lau-green">❓ What are the "Elite" and "Warning" lists used for overrides?</h3>
                <p>To ground our percentile-based grading in a real-world benchmark, we use a "ground truth" for the absolute top and bottom tiers. The "Elite" status is based on a journal's inclusion in highly-regarded international lists like the Nature Index, FT50, and UTD24. The "Warning" status is based on inclusion in lists of predatory or questionable publications, such as the CAS Warning List. These are used to apply a final override, ensuring that journals with a universal reputation for excellence or poor quality are graded accordingly.</p>
                
                <h2 class="lau-green mt-8">Using the ORBIT Rankings</h2>
                <h3 class="lau-green">❓ Why doesn't a specific journal have an ORBIT rank?</h3>
                <p>ORBIT only assigns a rank and score to journals that are evaluated by at least two of the six international ranking systems we use. This policy ensures that every ORBIT score is a true consensus and not based on a single opinion. While this may exclude some specialized journals, it significantly increases the reliability of the ranks we do provide.</p>
                <h3 class="lau-green">❓ How should I interpret the "Score Uncertainty"?</h3>
                <p>The Score Uncertainty measures how much the different ranking systems disagree about a journal's quality. A low score (e.g., below 5) is excellent. It indicates a strong consensus, meaning the ORBIT grade is very reliable. A high score (e.g., above 20) is a warning flag. It means the ranking systems have conflicting opinions, so while the ORBIT grade represents the mathematical average, it should be interpreted with caution.</p>
                <h3 class="lau-green">❓ My journal has an 'A' in one list but a 'C' in ORBIT. Why?</h3>
                <p>This is a perfect example of what ORBIT is designed to clarify. If a journal is ranked 'A' by one system but 'C' or 'D' by others, its final ORBIT grade will land somewhere in the middle (e.g., 'B' or 'C'), but it will have a high Score Uncertainty. The ORBIT grade reflects the average opinion, while the high uncertainty score tells you that the journal's reputation is disputed and not universally agreed upon.</p>
                <h3 class="lau-green">❓ How often is the ORBIT system updated?</h3>
                <p>The ORBIT rankings are updated whenever one of the six source ranking systems releases a new version. Once a new list is published, the integration and recalculation process typically takes one to two weeks to complete.</p>
                <h3 class="lau-green">❓ Does ORBIT include conference proceedings?</h3>
                <p>Currently, the ORBIT system focuses exclusively on journals. We recognize the importance of conference proceedings in many fields, especially in computer science and engineering, and are planning to include conference rankings in a future iteration of the system.</p>
            </div>

            <!-- Contact Us Section -->
            <div id="panel-contact" class="hidden">
                 <p class="text-gray-600 mb-6">Have an issue, question or suggestion? Please use the form below to get in touch.</p>
                 <div class="aspect-w-1 aspect-h-1" style="height: 856px;">
                    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSeLPW40BfHHuA6gb6OU1YtDjxE3TRc0SRuvlTGanI9_CwdVkA/viewform?embedded=true" width="100%" height="100%" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>
                 </div>
            </div>


            <!-- Results Section / Loading Indicator -->
            <div id="results-container" class="mt-8">
                <!-- Search results will be dynamically inserted here -->
            </div>
        </main>
    </div>

    <script>
        // DOM Elements
        const journalInput = document.getElementById('journal-input');
        const searchBtn = document.getElementById('search-btn');
        const clearSearchBtn = document.getElementById('clear-search-btn');
        const filterBtn = document.getElementById('filter-btn');
        const resetBtn = document.getElementById('reset-btn');
        const resultsContainer = document.getElementById('results-container');
        const rankSelect = document.getElementById('rank-select');
        const forNameSelect = document.getElementById('for-name-select');
        const publisherSelect = document.getElementById('publisher-select');
        const openAccessSelect = document.getElementById('open-access-select');
        const sortSelect = document.getElementById('sort-select');
        const tabContainer = document.getElementById('tab-container');
        const tabJournalSearch = document.getElementById('tab-journal-search');
        const tabFilterSearch = document.getElementById('tab-filter-search');
        const tabAbout = document.getElementById('tab-about');
        const tabFaq = document.getElementById('tab-faq');
        const tabContact = document.getElementById('tab-contact');
        const panelJournalSearch = document.getElementById('panel-journal-search');
        const panelFilterSearch = document.getElementById('panel-filter-search');
        const panelAbout = document.getElementById('panel-about');
        const panelFaq = document.getElementById('panel-faq');
        const panelContact = document.getElementById('panel-contact');

        // App State
        let journalData = [];
        let fuse;
        let tomSelectInstances = {};

        // --- Utility Functions ---
        function toTitleCase(str) {
            if (!str || typeof str !== 'string') return '';
            const articles = ['a', 'an', 'the'];
            const conjunctions = ['and', 'but', 'or', 'nor', 'for', 'so', 'yet'];
            const prepositions = ['in', 'on', 'at', 'to', 'of', 'by', 'for', 'from', 'with', 'as'];
            const smallWords = new Set([...articles, ...conjunctions, ...prepositions]);

            return str.split(' ').map((word, index, arr) => {
                const lowerWord = word.toLowerCase();
                const isAllCaps = /^[A-Z]{2,}$/.test(word);

                if (index === 0 || index === arr.length - 1) {
                    return isAllCaps ? word : word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
                }

                if (isAllCaps) {
                    return word;
                }

                if (smallWords.has(lowerWord)) {
                    return lowerWord;
                }

                return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
            }).join(' ');
        }

        function toTitleCaseStrict(str) {
            if (!str || typeof str !== 'string') return '';
             const articles = ['a', 'an', 'the'];
            const conjunctions = ['and', 'but', 'or', 'nor', 'for', 'so', 'yet'];
            const prepositions = ['in', 'on', 'at', 'to', 'of', 'by', 'for', 'from', 'with', 'as'];
            const smallWords = new Set([...articles, ...conjunctions, ...prepositions]);
            
            return str.split(' ').map((word, index, arr) => {
                 const lowerWord = word.toLowerCase();
                if (index === 0 || index === arr.length - 1) {
                    return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
                }
                 if (smallWords.has(lowerWord)) {
                    return lowerWord;
                }
                return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
            }).join(' ');
        }
        
        function levenshteinDistance(a, b) {
            if (!a || !b) return 99;
            const an = a.length, bn = b.length;
            if (an === 0) return bn; if (bn === 0) return an;
            const matrix = Array.from({ length: bn + 1 }, () => Array(an + 1).fill(0));
            for (let i = 0; i <= an; i++) matrix[0][i] = i;
            for (let j = 0; j <= bn; j++) matrix[j][0] = j;
            for (let j = 1; j <= bn; j++) {
                for (let i = 1; i <= an; i++) {
                    const cost = a[i - 1] === b[j - 1] ? 0 : 1;
                    matrix[j][i] = Math.min(matrix[j][i - 1] + 1, matrix[j - 1][i] + 1, matrix[j - 1][i - 1] + cost);
                }
            }
            return matrix[bn][an];
        }
        
        function showInfoModal(message) {
            const modalOverlay = document.createElement('div');
            modalOverlay.className = 'modal-overlay';
            modalOverlay.innerHTML = `
                <div class="modal-content">
                    <span class="modal-close">&times;</span>
                    <p>${message}</p>
                </div>
            `;
            document.body.appendChild(modalOverlay);
            modalOverlay.querySelector('.modal-close').onclick = () => modalOverlay.remove();
            modalOverlay.onclick = (e) => {
                if (e.target === modalOverlay) {
                    modalOverlay.remove();
                }
            };
        }

        // --- Display Functions ---
        function displayFullDetailCards(results) {
            resultsContainer.innerHTML = '';
            const statusMessage = document.createElement('p');
            statusMessage.className = 'text-gray-600 italic my-4';
            statusMessage.textContent = `Found ${results.length} journal(s).`;
            resultsContainer.appendChild(statusMessage);

            if (results.length === 0) return;

            const container = document.createElement('div');
            container.className = 'flex flex-col gap-6';
            
            results.forEach(journal => container.appendChild(createDetailCard(journal)));
            
            resultsContainer.appendChild(container);
        }

        function createDetailContent(journal) {
            const contentWrapper = document.createElement('div');
            const formatValue = (value) => (value === null || value === undefined || value === '') ? 'N/A' : value;
            
            const otherRanks = {
                'JUFOLevel': 'JUFO Level',
                'ABDC2022': 'ABDC 2022',
                'FNEGE2022': 'FNEGE 2022',
                'AJG2024': 'AJG 2024',
                'VHB2024': 'VHB 2024'
            };
            const otherRanksHtml = Object.entries(otherRanks).map(([key, displayName]) => {
                return `<p><strong>${displayName}:</strong> ${formatValue(journal[key])}</p>`;
            }).join('');

            const forCodesHtml = [1, 2, 3].map(i => {
                const code = journal[`FoR${i}Code`];
                const name = journal[`FoR${i}Name`];
                return (code && name) ? `<p><strong>FoR ${i}:</strong> ${toTitleCaseStrict(name)} (${code})</p>` : '';
            }).join('');

            const eliteStatus = journal.IsElite == 1 ? 'Yes' : 'No';
            const warningStatus = journal.OnWarningList || 'No';
            const businessRanking = journal.SpecialCalcFlag == 1 ? 'Included' : 'Excluded';
            const score = parseFloat(journal.Score_Uncertainty);
            const uncertaintyScore = !isNaN(score) ? score.toFixed(1) : 'N/A';
            const rankDMessage = journal.LAU_ORBIT_Rank === 'D' ? `<p class="mt-2 text-red-600">You are recommended not to publish in this journal.</p>` : '';
            const onWarningListMessage = journal.OnWarningList === 'Yes' ? `<p class="mt-2 p-2 bg-red-100 text-red-700 rounded-md text-sm"><strong>Warning:</strong> This journal is on the Early Warning List.</p>` : '';
            
            const infoIconSvg = `<svg class="info-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>`;

            contentWrapper.innerHTML = `
                <div class="space-y-2 text-sm text-gray-600 pt-3">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4">
                        <div>
                            <p><strong>LAU ORBIT Rank:</strong> <span class="lau-green font-semibold">${formatValue(journal.LAU_ORBIT_Rank)}</span></p>
                            <p><strong>Elite Journal<span onclick="showInfoModal('This indicates if the journal is currently listed in the ARWU Shanghai, FT50, Nature Index, or UTD24 lists.')">${infoIconSvg}</span>:</strong> ${eliteStatus}</p>
                            <p><strong>Warning List<span onclick="showInfoModal('This indicates if the journal is listed in the Early Warning List published by the Chinese Academy of Sciences.')">${infoIconSvg}</span>:</strong> ${warningStatus}</p>
                            <p><strong>Norwegian Level:</strong> ${formatValue(journal.NorwegianLevel)}</p>
                            ${otherRanksHtml}
                             <p><strong>Business Rankings<span onclick="showInfoModal('This indicates if the LAU ORBIT Rank is taking into account ABDC, AJG, FNEGE, and VHB. These rankings are only used for journals primarily focused on business, economics, and finance.')">${infoIconSvg}</span>:</strong> ${businessRanking}</p>
                             <p><strong>Uncertainty Score<span onclick="showInfoModal('This score quantifies the disagreement among the ranking systems. A low score (e.g., below 5) indicates a reliable grade based on strong consensus, while a high score reveals conflicting views.')">${infoIconSvg}</span>:</strong> ${uncertaintyScore}</p>
                        </div>
                        <div>
                            <p><strong>ISSN1:</strong> ${formatValue(journal.ISSN1)}</p>
                            <p><strong>ISSN2:</strong> ${formatValue(journal.ISSN2)}</p>
                            <p><strong>Publisher:</strong> ${formatValue(journal.Publisher)}</p>
                            <p><strong>Open Access:</strong> ${formatValue(journal.Is_OA)}</p>
                            <p><strong>Homepage:</strong> ${journal.Homepage ? `<a href="${journal.Homepage}" target="_blank" class="hyperlink">Click here<svg class="link-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A2.25 2.25 0 0110.5 10.5v-4.5a2.25 2.25 0 012.25-2.25H15M10.5 15L15 10.5" /></svg></a>` : 'N/A'}</p>
                            <div class="pt-2">
                                <h4 class="font-bold text-gray-700">Field of Research (FoR)<span onclick="showInfoModal('Field of Research (FoR) as classified by the widely used Australian and New Zealand Standard Research Classification (ANZSRC).')">${infoIconSvg}</span></h4>
                                ${forCodesHtml || '<p>N/A</p>'}
                            </div>
                        </div>
                    </div>
                </div>
                ${rankDMessage}
                ${onWarningListMessage}
            `;
            return contentWrapper;
        }

        function displayFilterList(results) {
            resultsContainer.innerHTML = '';
            const countMessage = document.createElement('p');
            countMessage.className = 'text-gray-600 italic my-4';
            countMessage.textContent = `Found ${results.length} journal(s).`;
            resultsContainer.appendChild(countMessage);
            if (results.length === 0) return;

            const listContainer = document.createElement('div');
            listContainer.className = 'space-y-2';

            results.forEach(journal => {
                const wrapper = document.createElement('div');
                const summaryItem = document.createElement('div');
                summaryItem.className = 'summary-item flex justify-between items-center p-3 border rounded-md';
                summaryItem.innerHTML = `<span class="font-medium text-gray-800">${toTitleCase(journal.JournalName || 'N/A')}</span><span class="lau-green font-semibold text-sm">${journal.LAU_ORBIT_Rank || 'N/A'}</span>`;
                
                const detailItem = document.createElement('div');
                detailItem.className = 'hidden p-4 border border-t-0 rounded-b-md bg-gray-50 detail-view';
                detailItem.appendChild(createDetailContent(journal));

                summaryItem.onclick = () => {
                    const allDetails = listContainer.querySelectorAll('.detail-view');
                    allDetails.forEach(detail => {
                        if (detail !== detailItem && !detail.classList.contains('hidden')) {
                            detail.classList.add('hidden');
                            detail.previousElementSibling.classList.remove('rounded-b-none');
                        }
                    });
                    detailItem.classList.toggle('hidden');
                    summaryItem.classList.toggle('rounded-b-none', !detailItem.classList.contains('hidden'));
                };
                
                wrapper.appendChild(summaryItem);
                wrapper.appendChild(detailItem);
                listContainer.appendChild(wrapper);
            });
            resultsContainer.appendChild(listContainer);
        }
        
        function createDetailCard(journal) {
            const card = document.createElement('div');
            card.className = 'result-card bg-white rounded-lg shadow-md p-5';
            card.innerHTML = `<h3 class="text-xl font-bold text-gray-800 mb-3">${toTitleCase(journal.JournalName || 'N/A')}</h3>`;
            card.appendChild(createDetailContent(journal));
            return card;
        }

        // --- Search and Filter Logic ---
        function handleSearch() {
            const query = journalInput.value.trim().toLowerCase();
            if (!query) {
                displayFullDetailCards([]);
                return;
            }
            const isIssn = /^\d{4}-?\d{3}[\dxX]$/.test(query);
            let results = [];

            if (isIssn) {
                results = journalData.filter(j => {
                    const issn1 = String(j.ISSN1 || '').replace('-', '');
                    const issn2 = String(j.ISSN2 || '').replace('-', '');
                    const queryIssn = query.replace('-', '');
                    return issn1 === queryIssn || issn2 === queryIssn;
                });
            } else {
                results = fuse.search(query).map(r => r.item);
            }
            displayFullDetailCards(results);
        }

        function handleFilter() {
            const selectedRanks = tomSelectInstances.ranks.getValue();
            const selectedForNames = tomSelectInstances.forNames.getValue();
            const selectedPublishers = tomSelectInstances.publishers.getValue();
            const selectedOA = openAccessSelect.value;
            const sortBy = sortSelect.value;

            let filteredData = journalData.filter(j => {
                const rankMatch = selectedRanks.length === 0 || selectedRanks.includes(String(j.LAU_ORBIT_Rank));
                const publisherMatch = selectedPublishers.length === 0 || selectedPublishers.includes(j.Publisher);
                const oaMatch = selectedOA === 'All' || j.Is_OA === selectedOA;
                const forNameMatch = selectedForNames.length === 0 || selectedForNames.some(name => 
                    toTitleCaseStrict(j['FoR1Name']) === name || 
                    toTitleCaseStrict(j['FoR2Name']) === name || 
                    toTitleCaseStrict(j['FoR3Name']) === name
                );
                return rankMatch && publisherMatch && forNameMatch && oaMatch;
            });

            const rankOrder = ['A+', 'A', 'B', 'C', 'D+', 'D', 'E', 'F'];
            if (sortBy === 'rank-asc') {
                filteredData.sort((a, b) => {
                    const indexA = rankOrder.indexOf(a.LAU_ORBIT_Rank);
                    const indexB = rankOrder.indexOf(b.LAU_ORBIT_Rank);
                    if (indexA === -1) return 1;
                    if (indexB === -1) return -1;
                    return indexA - indexB;
                });
            } else if (sortBy === 'rank-desc') {
                 filteredData.sort((a, b) => {
                    const indexA = rankOrder.indexOf(a.LAU_ORBIT_Rank);
                    const indexB = rankOrder.indexOf(b.LAU_ORBIT_Rank);
                    if (indexA === -1) return 1;
                    if (indexB === -1) return -1;
                    return indexB - indexA;
                });
            } else { // Default to name-asc
                filteredData.sort((a, b) => (a.JournalName || '').localeCompare(b.JournalName || ''));
            }

            displayFilterList(filteredData);
        }

        function handleResetFilters() {
            Object.values(tomSelectInstances).forEach(instance => instance.clear());
            sortSelect.value = 'name-asc';
            openAccessSelect.value = 'All';
            resultsContainer.innerHTML = '';
        }

        // --- Initialization and UI Setup ---
        function populateDropdowns() {
            const tomSelectSettings = {
                plugins: ['remove_button'],
                maxOptions: null, // Show all options
            };
            // Ranks
            const rankOrder = ['A+', 'A', 'B', 'C', 'D+', 'D', 'E', 'F'];
            const ranks = [...new Set(journalData.map(j => j.LAU_ORBIT_Rank).filter(Boolean))].sort((a, b) => {
                const indexA = rankOrder.indexOf(a), indexB = rankOrder.indexOf(b);
                return (indexA !== -1 && indexB !== -1) ? indexA - indexB : a.localeCompare(b);
            });
            tomSelectInstances.ranks = new TomSelect(rankSelect, { ...tomSelectSettings, placeholder: 'Select ranks...', options: ranks.map(r => ({ value: r, text: r })) });

            // FoR Names
            const forNames = new Set();
            journalData.forEach(j => {
                for (let i = 1; i <= 3; i++) {
                    const name = j[`FoR${i}Name`];
                    if (name && name.trim()) forNames.add(toTitleCaseStrict(name.trim()));
                }
            });
            const sortedForNames = [...forNames].sort((a, b) => a.localeCompare(b));
            tomSelectInstances.forNames = new TomSelect(forNameSelect, { ...tomSelectSettings, placeholder: 'Select FoR names...', options: sortedForNames.map(name => ({ value: name, text: name })) });

            // Publishers
            const publishers = [...new Set(journalData.map(j => j.Publisher).filter(p => p && p.trim()).map(p => p.trim()))].sort();
            tomSelectInstances.publishers = new TomSelect(publisherSelect, { ...tomSelectSettings, placeholder: 'Select publishers...', options: publishers.map(p => ({ value: p, text: p })) });
        }

        function switchTab(activeTab) {
            const tabs = {
                journal: { button: tabJournalSearch, panel: panelJournalSearch },
                filter: { button: tabFilterSearch, panel: panelFilterSearch },
                about: { button: tabAbout, panel: panelAbout },
                faq: { button: tabFaq, panel: panelFaq },
                contact: { button: tabContact, panel: panelContact }
            };
            Object.values(tabs).forEach(({ button, panel }) => {
                button.classList.remove('active');
                panel.classList.add('hidden');
            });
            tabs[activeTab].button.classList.add('active');
            tabs[activeTab].panel.classList.remove('hidden');
            resultsContainer.innerHTML = '';
        }

        // Event Listeners
        searchBtn.addEventListener('click', handleSearch);
        journalInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleSearch(); });
        clearSearchBtn.addEventListener('click', () => {
            journalInput.value = '';
            resultsContainer.innerHTML = '';
        });
        filterBtn.addEventListener('click', handleFilter);
        resetBtn.addEventListener('click', handleResetFilters);
        tabJournalSearch.addEventListener('click', () => switchTab('journal'));
        tabFilterSearch.addEventListener('click', () => switchTab('filter'));
        tabAbout.addEventListener('click', () => switchTab('about'));
        tabFaq.addEventListener('click', () => switchTab('faq'));
        tabContact.addEventListener('click', () => switchTab('contact'));
        
        // Data Loading
        window.addEventListener('DOMContentLoaded', async () => {
            resultsContainer.innerHTML = `<div id="loading-container" class="w-full max-w-md mx-auto"><p class="text-center text-gray-600 mb-2">Loading data...</p><div class="w-full bg-gray-200 rounded-full h-2.5"><div id="progress-bar" class="bg-lau-green h-2.5 rounded-full" style="width: 0%"></div></div></div>`;
            const progressBar = document.getElementById('progress-bar');
            try {
                const response = await fetch('https://raw.githubusercontent.com/lauorbit/lauorbit/main/ORBIT.xlsx');
                if (!response.ok) throw new Error('Network response was not ok.');
                const contentLength = +response.headers.get('Content-Length');
                let receivedLength = 0;
                const chunks = [];
                const reader = response.body.getReader();
                while(true) {
                    const { done, value } = await reader.read();
                    if (done) break;
                    chunks.push(value);
                    receivedLength += value.length;
                    if (contentLength) progressBar.style.width = `${(receivedLength / contentLength) * 100}%`;
                }
                const chunksAll = new Uint8Array(receivedLength);
                let position = 0;
                for(let chunk of chunks) {
                    chunksAll.set(chunk, position);
                    position += chunk.length;
                }
                const workbook = XLSX.read(chunksAll.buffer, {type: 'buffer'});
                journalData = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]], { defval: "" });
                
                // Initialize Fuse.js
                const options = {
                    includeScore: true,
                    keys: ['JournalName'],
                    threshold: 0.4,
                    ignoreLocation: true,
                    findAllMatches: true,
                };
                fuse = new Fuse(journalData, options);

                document.getElementById('loading-container').remove();
                tabContainer.classList.remove('hidden');
                panelJournalSearch.classList.remove('hidden');
                populateDropdowns();
                resultsContainer.innerHTML = '';
            } catch (error) {
                console.error('Error loading journal data:', error);
                resultsContainer.innerHTML = `<p class="text-center text-red-500">Failed to load journal data. Please check the URL and your internet connection.</p>`;
            }
        });
    </script>
</body>
</html>
